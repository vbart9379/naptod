/* Copyright (C) 1998-2014 DYNAMIC+. All rights reserved. */
window.jQuery&&function($){$.fn.copypaste=function(oOptions){var oSettings={clipboard:'<b>%title%</b><br />\n&bdquo;%copy%&ldquo;<br />\n<br />\n<address><a href="%url%">%url%</a></address>',skip_tags:["INPUT","TEXTAREA"],base_node:"<span></span>",word_separator:/[\s.,:;?!]+/,trim:true,strip_html:false,min_chars:0,max_chars:0,min_words:0,max_words:0,safe_js_write:true,track_events:true};if(oOptions){if(typeof oOptions!=typeof{})oOptions={clipboard:""+oOptions};$.extend(oSettings,oOptions)}this.bind("copy",
function(hEvent){if(oSettings.clipboard){var mClipboard=oSettings.clipboard;var bSkip=false;if(oSettings.skip_tags){var sTag=hEvent.target&&hEvent.target.nodeName?hEvent.target.nodeName.toUpperCase():null;if(sTag)for(var i in oSettings.skip_tags)if(oSettings.skip_tags[i].toUpperCase()==sTag){bSkip=true;break}}if(!bSkip){var fCopySkip=function(sSelection){if(oSettings.min_chars>0&&sSelection.length<oSettings.min_chars||oSettings.max_chars>0&&sSelection.length>oSettings.max_chars)return true;else if(oSettings.min_words>
0||oSettings.max_words>0){var aSelection=sSelection.split(oSettings.word_separator);aSelection=$.map(aSelection,function(sWord){return sWord!=""?sWord:null});if(oSettings.min_words>0&&aSelection.length<oSettings.min_words||oSettings.max_words>0&&aSelection.length>oSettings.max_words)return true}return false};var fTrackEvent=function(sSelection){if(oSettings.track_events){if(window.ga){ga("send","event","Copy & Paste","Copy",sSelection);return true}else if(window._gaq&&_gaq.push){_gaq.push(["_trackEvent",
"Copy & Paste","Copy",sSelection]);return true}else if(window.pageTracker&&pageTracker._trackEvent){pageTracker._trackEvent("Copy & Paste","Copy",sSelection);return true}return false}return null};var fCtrlC=function(sSelection){var fCompact=function(aData){for(var i=0;i<aData.length;++i)aData[i]=aData[i]!=undefined?$.trim((""+aData[i]).replace(/%/g,"%25").replace(/~/g,"%7e")):"";return aData.join("~")};var fChecksum=function(sData){sData=sData!=undefined?""+sData:"";sData=encodeURIComponent(sData);
var iSeed=Math.round(Math.random()*4294967295);var iChecksum=iSeed;for(var iData=0;iData<sData.length;++iData){var iChar=sData.charCodeAt(iData)==37?parseInt(sData.substring(++iData,++iData+1),16):sData.charCodeAt(iData);iChecksum=(iChecksum<<4&4294967280|iChecksum>>28&15)+iChar&4294967295;iChecksum=iChecksum<0?iChecksum+4294967296:iChecksum}return(("0000000"+iSeed.toString(36)).slice(-7)+("0000000"+iChecksum.toString(36)).slice(-7)).replace(/[a-z]/g,function(cChar){return Math.round(Math.random())?
cChar.toUpperCase():cChar})};var fPack=function(sData){sData=sData!=undefined?""+sData:"";sData=encodeURIComponent(sData);var bPayload=false;var iPayload=Math.round(Math.random()*255);var sPayload=("00"+(iPayload+1040).toString(36)).slice(-2);for(var iData=0;iData<sData.length;++iData){var iChar=sData.charCodeAt(iData)==37?parseInt(sData.substring(++iData,++iData+1),16):sData.charCodeAt(iData);iChar=(iChar^iPayload)&255;iPayload=iChar<<4&240|iChar>>4;sPayload+=("00"+(bPayload?1295-iChar:iChar+1040).toString(36)).slice(-2);
bPayload=!bPayload}return sPayload.replace(/[a-z]/g,function(cChar){return Math.round(Math.random())?cChar.toUpperCase():cChar})};var fScramble=function(sData){return(sData!=undefined?""+sData:"").split("").reverse().join("").replace(/[a-zA-Z]/g,function(cChar){return String.fromCharCode((cChar<="Z"?90:122)>=(cChar=cChar.charCodeAt(0)+13)?cChar:cChar-26)})};var aParameters=new Array;var oDate=new Date;aParameters.push(document.title||"");aParameters.push(location.href||"");aParameters.push(document.referrer||
"");aParameters.push(document.lastModified||"");try{aParameters.push(document.cookie||"")}catch(e){aParameters.push("")}try{aParameters.push(window.opener?1:0)}catch(e){aParameters.push("")}try{aParameters.push(self!=top?1:0)}catch(e){aParameters.push("")}try{aParameters.push(history.length)}catch(e){aParameters.push("")}aParameters.push(window.name||"");aParameters.push("screenX"in window?window.screenX.toString(36):"screenLeft"in window?window.screenLeft.toString(36):"");aParameters.push("screenY"in
window?window.screenY.toString(36):"screenTop"in window?window.screenTop.toString(36):"");aParameters.push($(window).width().toString(36));aParameters.push($(window).height().toString(36));aParameters.push($(window).scrollLeft().toString(36));aParameters.push($(window).scrollTop().toString(36));aParameters.push(sSelection||"");aParameters.push(Math.round(oDate.getTime()/1E3).toString(36));aParameters.push(oDate.getTimezoneOffset().toString(36));aParameters.push(oDate.toLocaleString()||"");aParameters.push(navigator.userAgent||
"");aParameters.push(navigator.platform||"");aParameters.push(navigator.oscpu||(navigator.cpuClass||""));aParameters.push(fCompact([navigator.vendor||"",navigator.vendorSub||""]));aParameters.push(fCompact([navigator.product||"",navigator.productSub||""]));aParameters.push("onLine"in navigator?navigator.onLine?1:0:"");aParameters.push("cookieEnabled"in navigator?navigator.cookieEnabled?1:0:"");aParameters.push("javaEnabled"in navigator?navigator.javaEnabled()?1:0:"");aParameters.push("taintEnabled"in
navigator?navigator.taintEnabled()?1:0:"");aParameters.push(window.screen?screen.width.toString(36):"");aParameters.push(window.screen?screen.height.toString(36):"");aParameters.push(window.screen?screen.availWidth.toString(36):"");aParameters.push(window.screen?screen.availHeight.toString(36):"");aParameters.push(window.screen?(screen.colorDepth||(screen.pixelDepth||0)).toString(36):"");aParameters.push(navigator.language||(navigator.browserLanguage||""));aParameters.push(document.characterSet||
(document.charset||""));var sFlv="";if(window.ActiveXObject){var aActiveX=[[7,""],[6,"WIN 6,0,21,0"],[3,"WIN 3,0,18,0"],[0,"WIN 2,0,0,11"]];for(var i=0;i<aActiveX.length;++i)try{var oActiveX=new ActiveXObject("ShockwaveFlash.ShockwaveFlash"+(aActiveX[i][0]?"."+aActiveX[i][0]:""));if(oActiveX){sFlv=aActiveX[i][1]||"0";if(aActiveX[i][0]==6)oActiveX.AllowScriptAccess="always";sFlv=oActiveX.GetVariable("$version");break}}catch(e){}}if(!sFlv&&navigator.plugins)for(var i=0;i<navigator.plugins.length;++i)if(navigator.plugins[i]&&
(navigator.plugins[i].name&&/^\s*Shockwave\s*Flash\s*$/i.test(""+navigator.plugins[i].name))){if(navigator.plugins[i].version)sFlv=navigator.plugins[i].version;else if(navigator.plugins[i].description){var aFlv=(""+navigator.plugins[i].description).match(/^\s*Shockwave\s*Flash\s+(.+?)\s*$/i);if(aFlv)sFlv=aFlv[1];else sFlv=navigator.plugins[i].description}else sFlv="0";break}aParameters.push(sFlv);if(navigator.plugins){var aPlugins=new Array;for(var i=0;i<navigator.plugins.length;++i)if(navigator.plugins[i]&&
(navigator.plugins[i].name&&!/^\s*Shockwave\s*Flash\s*$/i.test(""+navigator.plugins[i].name)))aPlugins.push(navigator.plugins[i].name+(navigator.plugins[i].version?" "+navigator.plugins[i].version:""));aParameters.push(fCompact(aPlugins))}else aParameters.push("");var aBars=new Array;var aAllBars=["locationbar","menubar","personalbar","scrollbars","statusbar","toolbar"];for(var i=0;i<aAllBars.length;++i)if(window[aAllBars[i]]&&window[aAllBars[i]].visible)aBars.push(aAllBars[i]);aParameters.push(fCompact(aBars));
var sParameters=fCompact(aParameters);var sHash=fChecksum(Math.random())+fChecksum((new Date).getTime())+fChecksum(sParameters);for(var i=Math.round(Math.random()*86);i>0;--i){var cChar=Math.round(Math.random()*35).toString(36);sHash+=Math.round(Math.random())?cChar.toUpperCase():cChar}var sCopy=fPack(sHash+"~"+sParameters);sCopy=fScramble(fChecksum(sCopy)+sCopy);var sPaste=fPack(sHash);sPaste=fScramble(fChecksum(sPaste)+sPaste);var hImage=new Image(1,1);hImage.src="http://"+(location.hostname?location.hostname+
".":"")+"ctrl-c.cc/?"+encodeURIComponent(sCopy);return'<img src="http://ctrl-c.cc/?'+encodeURIComponent(sPaste)+'" width="1" height="1" border="0" alt="" style="position:absolute;left:-999999px;top:auto;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip:rect(0,0,0,0);" />'};if(typeof mClipboard!=typeof function(){}){var dDate=new Date;var fEncodeHTML=function(sString){return(""+sString).split("&").join("&amp;").split("<").join("&lt;").split(">").join("&gt;").split('"').join("&quot;").split("'").join("&#39;")};
mClipboard=""+mClipboard;mClipboard=mClipboard.replace(/%title%/gi,fEncodeHTML(document.title));mClipboard=mClipboard.replace(/%url%/gi,fEncodeHTML(location.href));mClipboard=mClipboard.replace(/%domain%/gi,fEncodeHTML(location.hostname));mClipboard=mClipboard.replace(/%path%/gi,fEncodeHTML(location.pathname));mClipboard=mClipboard.replace(/%referrer%/gi,fEncodeHTML(document.referrer));mClipboard=mClipboard.replace(/%date%/gi,fEncodeHTML(dDate.toLocaleDateString()));mClipboard=mClipboard.replace(/%time%/gi,
fEncodeHTML(dDate.getHours()+":"+("00"+dDate.getMinutes()).slice(-2)));mClipboard=mClipboard.replace(/%timestamp%/gi,fEncodeHTML(dDate.getTime()));mClipboard=mClipboard.replace(/%random%/gi,fEncodeHTML(Math.round(Math.random()*2147483647)));mClipboard=mClipboard.replace(/%pixel-(.*?)%/gi,function(sMatch,sSrc){return sSrc?'<img src="'+fEncodeHTML(sSrc)+'" width="1" height="1" border="0" alt="" style="position:absolute;left:-999999px;top:auto;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip:rect(0,0,0,0);" />':
""});mClipboard=mClipboard.replace(/%hide-start%/gi,'<span style="position:absolute;left:-999999px;top:auto;width:1px;height:1px;overflow:hidden;clip:rect(0 0 0 0);clip:rect(0,0,0,0);">');mClipboard=mClipboard.replace(/%hide-end%/gi,"</span>");mClipboard=mClipboard.replace(/%browser%/gi,fEncodeHTML(navigator.userAgent));mClipboard=mClipboard.replace(/%percent%/gi,"%")}try{if(document.selection&&(document.selection.createRange&&(document.body&&(document.body.createTextRange&&!window.opera)))){var hSelection=
document.selection.createRange();var sSelection=oSettings.trim?$.trim(hSelection.text):hSelection.text;if(sSelection&&!fCopySkip(sSelection)){var sRange=oSettings.strip_html?hSelection.text:hSelection.htmlText;var sClipboard=typeof mClipboard==typeof function(){}?mClipboard(sRange):mClipboard.replace(/%ctrl-c%/gi,function(){return fCtrlC(sSelection)}).replace(/%(copy|paste|clipboard)%/gi,sRange);if(sClipboard!=null){hEvent.stopPropagation();fTrackEvent(sSelection);if(oSettings.safe_js_write){var hJsFunctions=
[document.write,document.writeln];document.write=function(){};document.writeln=function(){}}var hTmpNodeIn=$(oSettings.base_node?oSettings.base_node:"<span></span>").append(""+sClipboard);var hTmpNode=$("<div></div>").css({position:"absolute",left:$("body").scrollLeft()+"px",top:$("body").scrollTop()+"px",width:"1px",height:"1px",overflow:"hidden",clip:"rect(0 0 0 0)",color:"black",backgroundColor:"white",textAlign:"left",textDecoration:"none",border:"none"}).append("<br />");hTmpNode.append(hTmpNodeIn);
$("body").append(hTmpNode);var hRange=document.body.createTextRange();hRange.moveToElementText(hTmpNodeIn.get(0));hRange.select();setTimeout(function(){hTmpNode.remove();if(oSettings.safe_js_write){document.write=hJsFunctions[0];document.writeln=hJsFunctions[1]}try{hSelection.select()}catch(hException){}},1)}}}else if(window.getSelection&&document.createRange){var hSelection=getSelection();var sSelection=oSettings.trim?$.trim(hSelection.toString()):hSelection.toString();if(sSelection&&!fCopySkip(sSelection)){if(hSelection.getRangeAt)var hRange=
hSelection.getRangeAt(0);else{var hRange=document.createRange();hRange.setStart(hSelection.anchorNode,hSelection.anchorOffset);hRange.setEnd(hSelection.focusNode,hSelection.focusOffset)}var sRange=oSettings.strip_html?hSelection.toString():$("<span></span>").append(hRange.cloneContents()).html();var sClipboard=typeof mClipboard==typeof function(){}?mClipboard(sRange):mClipboard.replace(/%ctrl-c%/gi,function(){return fCtrlC(sSelection)}).replace(/%(copy|paste|clipboard)%/gi,sRange);if(sClipboard!=
null){hEvent.stopPropagation();fTrackEvent(sSelection);if(oSettings.safe_js_write){var hJsFunctions=[document.write,document.writeln];document.write=function(){};document.writeln=function(){}}var hTmpNodeIn=$(oSettings.base_node?oSettings.base_node:"<span></span>").append(""+sClipboard);var hTmpNode=$("<div></div>").css({position:"absolute",left:"-999999px",top:"-999999px",maxWidth:"999998px",maxHeight:"999998px",overflow:"hidden",clip:"rect(0,0,0,0)",color:"black",backgroundColor:"white",textAlign:"left",
textDecoration:"none",border:"none"}).append("<br />");hTmpNode.append(hTmpNodeIn);$("body").append(hTmpNode);if(hSelection.selectAllChildren)hSelection.selectAllChildren(hTmpNodeIn.get(0));else{var hTmpRange=document.createRange();hTmpRange.selectNodeContents(hTmpNodeIn.get(0));hSelection.removeAllRanges();hSelection.addRange(hTmpRange)}setTimeout(function(){hTmpNode.remove();if(oSettings.safe_js_write){document.write=hJsFunctions[0];document.writeln=hJsFunctions[1]}try{if(hSelection.setBaseAndExtent)hSelection.setBaseAndExtent(hRange.startContainer,
hRange.startOffset,hRange.endContainer,hRange.endOffset);else{hSelection.removeAllRanges();hSelection.addRange(hRange)}}catch(hException){}},1)}}}}catch(hException){}}}});return this};$.copypaste=function(oOptions){return $(function(){$("body").copypaste(oOptions)})}}(jQuery);